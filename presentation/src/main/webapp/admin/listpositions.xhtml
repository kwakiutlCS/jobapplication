<ui:composition template="/resources/layouts/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">


	<ui:define name="title">List Position</ui:define>

	<ui:define name="content">

		<h2>List position page</h2>

		<h:form id="listpositionform">

			<p:dataTable var="position" value="#{listPositionBean.positions}"
				widgetVar="positionsTable"
				emptymessage="No positions found for given criteria"
				filteredValue="#{listPositionBean.filteredPositions}"
				style="text-align: center">

				<f:facet name="header">
					<p:outputPanel>
						<h:outputText value="Search all fields:" />
						<p:inputText id="globalFilter"
							onkeyup="PF('positionsTable').filter()" update="listpositionform"
							placeholder="Enter keyword" />
					</p:outputPanel>
				</f:facet>

				<p:column headerText="Closing date"
					filterBy="#{position.closingDateFormatted}"
					filterMatchMode="contains">
					<h:outputText value="#{position.closingDateFormatted}">
					</h:outputText>
				</p:column>

				<p:column headerText="Code" filterBy="#{position.code}"
					filterMatchMode="contains">
					<h:outputText value="#{position.code}" />
				</p:column>

				<p:column headerText="Title" filterBy="#{position.title}"
					filterMatchMode="contains">
					<h:outputText value="#{position.title}" />
				</p:column>

				<p:column headerText="Situation" filterBy="#{position.state}"
					filterMatchMode="contains">
					<h:outputText value="#{position.state.positionStateLabel}" />
				</p:column>


				<p:column headerText="Location"
					filterBy="#{position.localizationsFormatted}"
					filterMatchMode="contains">
					<ui:repeat value="#{position.localizationsFormatted}" var="l">
  						    #{l}
					</ui:repeat>
				</p:column>

				<p:column headerText="Technical Area" style="width:200px"
					filterBy="#{position.technicalAreasFormatted}"
					filterMatchMode="contains">
					<ui:repeat value="#{position.technicalAreasFormatted}" var="t">
  						    #{t}
					</ui:repeat>
				</p:column>

				<p:column headerText="Company" filterBy="#{position.company}"
					filterMatchMode="contains">
					<h:outputText value="#{position.company}" />
				</p:column>

				<p:column headerText="Detail" style="width:32px;text-align: center">
					<p:commandButton update=":listpositionform :positionDetail"
						oncomplete="PF('Dlg1').show()" icon="ui-icon-search" title="View">
						<f:setPropertyActionListener value="#{position}"
							target="#{listPositionBean.selectedPosition}" />
					</p:commandButton>
				</p:column>

			</p:dataTable>

		</h:form>

		<p:dialog header="Position detail" widgetVar="Dlg1" modal="true"
			showEffect="fade" hideEffect="fade" resizable="false">
			<p:outputPanel id="positionDetail" style="text-align:center;">
				<p:panelGrid columns="2"
					rendered="#{not empty listPositionBean.selectedPosition}"
					columnClasses="label,value">

					<h:outputText value="Opening date:" />
					<h:outputText value="#{listPositionBean.selectedPosition.openingDateFormatted}" />
					
					<h:outputText value="Code:" />
					<h:outputText value="#{listPositionBean.selectedPosition.code}" />

					<h:outputText value="Title:"/>	
					<h:outputText value="#{listPositionBean.selectedPosition.title}" />
				

					<h:outputText value="Location:" />
					<h:outputText
						value="#{listPositionBean.selectedPosition.localizationsFormatted}" />

					<h:outputText value="Situation:" />
					<h:outputText value="#{listPositionBean.selectedPosition.state}" />

					<h:outputText value="Vacancies:" />
					<h:outputText
						value="#{listPositionBean.selectedPosition.vacancies}" />

					<h:outputText value="Closing date:" />
					<h:outputText
						value="#{listPositionBean.selectedPosition.closingDateFormatted}" />

					<h:outputText value="SLA (days):" />
					<h:outputText value="#{listPositionBean.selectedPosition.sla}" />

					<h:outputText value="Contact person:" />
					<h:outputText
						value="#{listPositionBean.selectedPosition.contactPerson}" />

					<h:outputText value="Company" />
					<h:outputText value="#{listPositionBean.selectedPosition.company}" />

					<h:outputText value="Technical Area" />
					<h:outputText
						value="#{listPositionBean.selectedPosition.technicalAreasFormatted}" />

					<h:outputText value="Description" />
					<h:outputText
						value="#{listPositionBean.selectedPosition.description}" />

					<h:outputText value="Publication channels" />
					<h:outputText
						value="#{listPositionBean.selectedPosition.publicationChannels}" />

				</p:panelGrid>
			</p:outputPanel>
		</p:dialog>



	</ui:define>
</ui:composition>