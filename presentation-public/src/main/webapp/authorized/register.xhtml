<ui:composition template="/resources/layouts/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">


	<ui:define name="title">Register</ui:define>

	<ui:define name="content">

		<h:form enctype="multipart/form-data">
			<p:growl id="growl" sticky="true" showDetail="true" />

			<p:wizard flowListener="#{registerWizard.onFlowProcess}">
				<p:tab id="personal" title="Personal">
					<p:panel header="Personal Details">
						<p:messages />
						<h:panelGrid columns="2">
							<p:outputLabel value="Login" for="login" />
							<p:outputLabel id="login"
								value="#{registerWizard.registerBean.login}" required="true" />

							<p:outputLabel value="Email" for="email" />
							<p:outputLabel id="email"
								value="#{registerWizard.registerBean.email}" required="true" />

							<p:outputLabel value="First name" for="name" />
							<p:inputText id="name"
								value="#{registerWizard.registerBean.name}" required="true" />

							<p:outputLabel value="Last name" for="surname" />
							<p:inputText id="surname"
								value="#{registerWizard.registerBean.surname}" required="true" />

						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="contacts" title="Contacts">
					<p:panel header="Contact Details">
						<p:messages />
						<h:panelGrid columns="2">

							<p:outputLabel value="Address" for="address" />
							<p:inputText id="address"
								value="#{registerWizard.registerBean.address}" />

							<p:outputLabel value="City" for="city" />
							<p:inputText id="city"
								value="#{registerWizard.registerBean.city}" />

							<p:outputLabel value="Country" for="country" />
							<p:inputText id="country"
								value="#{registerWizard.registerBean.country}" />

							<p:outputLabel value="Phone number" for="phone" />
							<p:inputMask mask="999 999 999" id="phone"
								value="#{registerWizard.registerBean.phone}" />

							<p:outputLabel value="Mobile number" for="mobile" />
							<p:inputMask mask="999 999 999" id="mobile"
								value="#{registerWizard.registerBean.mobilePhone}" />

						</h:panelGrid>
					</p:panel>
				</p:tab>


				<p:tab id="qualifications" title="Qualifications">
					<p:panel header="Qualifications">
						<p:messages />
						<h:panelGrid columns="1">

							<h:panelGroup id="qualificationsList">
								<ui:repeat value="#{loginBean.user.qualifications}"
									var="qualification">
									<div>
										<div>#{qualification.school}</div>
										<div>#{qualification.degree}</div>
										<div>
											<p:commandLink value="delete" update="@form"
												action="#{registerBean.removeQualification(qualification)}" />
										</div>
									</div>
								</ui:repeat>

							</h:panelGroup>
							<p></p>
							<p:outputLabel for="institution" value="Institution" />
							<p></p>
							<p:autoComplete id="institution"
								value="#{registerBean.qualification}"
								forceSelection="false"
								completeMethod="#{registerBean.listSchools}"
								style="width:600px" maxResults="8">
							</p:autoComplete>

							<p></p>
							<p:outputLabel for="degreeField" value="Course" />
							<p:autoComplete id="degreeField" style="width:600px"
								value="#{registerBean.degree}"
								completeMethod="#{registerBean.listDegrees()}" maxResults="8" />
							<p></p>
							<p:commandButton value="Add qualification"
								action="#{registerBean.addQualification}" update="@form" />
							
						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="cv" title="Curriculum Vitae">
					<p:panel header="Curriculum Vitae">
						<p:messages />
						<h:panelGrid columns="1">
							<h:inputFile value="#{registerBean.cv}" required="true"
								id="fileUploader">
								<f:ajax listener="#{registerBean.upload}"
									render=":globalMessages" />
							</h:inputFile>


							<p:commandButton value="Submit"
								actionListener="#{registerWizard.save}" update="growl"
								process="@this" />

						</h:panelGrid>
					</p:panel>
				</p:tab>
			</p:wizard>
		</h:form>

	</ui:define>
</ui:composition>



